<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">js/signaler/Base.js | rtc-engine</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="WebRTC&#xB97C; &#xC774;&#xC6A9;&#xD55C; &#xB370;&#xC774;&#xD130; &#xC804;&#xC1A1;&#xC744; &#xC704;&#xD55C; &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC;"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="rtc-engine"><meta property="twitter:description" content="WebRTC&#xB97C; &#xC774;&#xC6A9;&#xD55C; &#xB370;&#xC774;&#xD130; &#xC804;&#xC1A1;&#xC744; &#xC704;&#xD55C; &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC;"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/Quasar-Kim/rtc-engine"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Channel.js~Channel.html">Channel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/ChunkProducer.js~ChunkProducer.html">ChunkProducer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/RTCSocket.js~RTCSocket.html">RTCSocket</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/ReadableTransaction.js~ReadableTransaction.html">ReadableTransaction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Transaction.js~Transaction.html">Transaction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/WritableTransaction.js~WritableTransaction.html">WritableTransaction</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#signaler">signaler</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/signaler/Base.js~SignalerBase.html">SignalerBase</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/signaler/LocalSignaler.js~LocalSignaler.html">LocalSignaler</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#util">util</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/IntervalTimer.js~IntervalTimer.html">IntervalTimer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/ListenerManager.js~ListenerManager.html">ListenerManager</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/Mitt.js~Mitt.html">Mitt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/ObservableEntry.js~ObservableEntry.html">ObservableEntry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/ObservableEntry.js~WaitEntry.html">WaitEntry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/ObservableMap.js~ObservableMap.html">ObservableMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/ObservableQueue.js~ObservableQueue.html">ObservableQueue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/Queue.js~Queue.html">Queue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/util/TimeoutTimer.js~TimeoutTimer.html">TimeoutTimer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-observe">observe</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-wait">wait</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-waitAll">waitAll</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createLogger">createLogger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-disableLog">disableLog</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-makeEta">makeEta</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-once">once</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-prettyBytes">prettyBytes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-EventListenerEntry">EventListenerEntry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-EventHandler">EventHandler</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/signaler/Base.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import Mitt from &apos;../util/Mitt.js&apos;
import { ObservableEntry } from &apos;../util/ObservableEntry.js&apos;

// /**
//  * @template T
//  * @typedef {import(&apos;../util/Mitt.js&apos;).EventHandler&lt;T&gt;} EventHandler&lt;T&gt;
//  */

// /**
//  * @typedef {import(&apos;../RTCEngine.js&apos;).default} RTCEngine
//  */

/**
 * &#xC2DC;&#xADF8;&#xB110;&#xB7EC;&#xC5D0; &#xD544;&#xC218;&#xC801;&#xC778; &#xAE30;&#xB2A5;&#xB4E4;&#xC744; &#xC81C;&#xACF5;&#xD558;&#xB294; &#xBCA0;&#xC774;&#xC2A4; &#xD074;&#xB798;&#xC2A4;. &#xC2DC;&#xADF8;&#xB110;&#xB7EC;&#xB294; &#xBC18;&#xB4DC;&#xC2DC; &#xC774; &#xD074;&#xB798;&#xC2A4;&#xB97C; &#xD655;&#xC7A5;&#xD574;&#xC57C; &#xD569;&#xB2C8;&#xB2E4;.
 *
 * &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC740; &#xAE30;&#xB2A5;&#xB4E4;&#xC744; &#xC81C;&#xACF5;&#xD569;&#xB2C8;&#xB2E4;:
 *  - &#xBC1B;&#xC740; &#xBA54;&#xC2DC;&#xC9C0;&#xC758; `type` &#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; &#xC774;&#xBCA4;&#xD2B8;&#xB97C; &#xBC1C;&#xC0DD;&#xC2DC;&#xCF1C;&#xC11C; &#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xC804;&#xB2EC;&#xD569;&#xB2C8;&#xB2E4;.
 *    &#xC774;&#xB807;&#xAC8C; &#xD558;&#xBA74; &#xD558;&#xB098;&#xC758; &#xC774;&#xBCA4;&#xD2B8;&#xB97C; &#xBC1C;&#xC0DD;&#xC2DC;&#xD0A4;&#xB294;&#xAC83;&#xBCF4;&#xB2E4; &#xD6A8;&#xC728;&#xC801;&#xC73C;&#xB85C; &#xCF54;&#xB4DC;&#xB97C; &#xAD6C;&#xD604;&#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
 *  - `type` &#xC774;&#xBCA4;&#xD2B8;&#xC758; &#xD578;&#xB4E4;&#xB7EC;&#xAC00; &#xC5C6;&#xC744; &#xACBD;&#xC6B0; &#xD578;&#xB4E4;&#xB7EC;&#xAC00; &#xCD94;&#xAC00;&#xB420;&#xB54C;&#xAE4C;&#xC9C0; &#xAE30;&#xB2E4;&#xB838;&#xB2E4;&#xAC00; &#xCD94;&#xAC00;&#xB418;&#xBA74; &#xADF8; &#xD578;&#xB4E4;&#xB7EC;&#xAC00; &#xC804;&#xC5D0; &#xBC1B;&#xC558;&#xB358; &#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xBAA8;&#xB450; &#xCC98;&#xB9AC;&#xD558;&#xB3C4;&#xB85D; &#xD569;&#xB2C8;&#xB2E4;.
 *    &#xC774;&#xB807;&#xAC8C; &#xD558;&#xBA74; &#xC2DC;&#xADF8;&#xB110;&#xB7EC;&#xAC00; &#xC5D4;&#xC9C4;&#xC774; &#xC0DD;&#xC131;&#xB418;&#xAE30;&#xC804;&#xC5D0; &#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xBC1B;&#xC544;&#xB3C4; &#xBA54;&#xC2DC;&#xC9C0;&#xAC00; &#xC815;&#xC0C1;&#xC801;&#xC73C;&#xB85C; &#xC5D4;&#xC9C4;&#xC5D0; &#xC804;&#xB2EC;&#xB429;&#xB2C8;&#xB2E4;.
 */
export default class SignalerBase extends Mitt {
  constructor () {
    super()

    /**
     * &#xC2DC;&#xADF8;&#xB110;&#xB7EC;&#xAC00; &#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xBCF4;&#xB0BC; &#xC218; &#xC788;&#xB294; &#xC0C1;&#xD0DC;&#xC778;&#xC9C0; &#xB098;&#xD0C0;&#xB0B4;&#xB294; &#xAC12;.
     * RTCEngine&#xC740; &#xC2DC;&#xADF8;&#xB110;&#xB7EC;&#xC640; &#xC0C1;&#xD638;&#xC791;&#xC6A9;&#xD560; &#xB54C; &#xD56D;&#xC0C1; &#xC774; &#xAC12;&#xC774; `true`&#xAC00; &#xB420;&#xB54C;&#xAE4C;&#xC9C0; &#xAE30;&#xB2E4;&#xB9BD;&#xB2C8;&#xB2E4;.
     */
    this.ready = new ObservableEntry(false)

    /**
     * RTCEngine &#xC0DD;&#xC131;&#xC2DC; &#xC801;&#xC6A9;&#xB420; &#xC124;&#xC815;&#xAC12;&#xB4E4;.
     * &#xC720;&#xC800; &#xC124;&#xC815;&#xAC12;&#xC5D0; &#xC758;&#xD574;&#xC11C; &#xB36E;&#xC5B4;&#xC368;&#xC9C8; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
     */
    this.options = {}

    /**
     * &#xBC1B;&#xC740; &#xBA54;&#xC2DC;&#xC9C0;&#xC758; `type` &#xD544;&#xB4DC;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; &#xC774;&#xBCA4;&#xD2B8; &#xB9AC;&#xC2A4;&#xB108;&#xAC00; &#xC5C6;&#xC73C;&#xBA74; &#xC5EC;&#xAE30;&#xC5D0; &#xBCF4;&#xAD00;&#xB429;&#xB2C8;&#xB2E4;.
     * @type {Map&lt;string, any[]&gt;}
     */
    this.unhandledMsg = new Map()
  }

  /**
   * &#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xC5D4;&#xC9C4;&#xC5D0; &#xC804;&#xB2EC;&#xD569;&#xB2C8;&#xB2E4;.
   * @param {*} msg &#xBC1B;&#xC740; &#xBA54;&#xC2DC;&#xC9C0;
   */
  receive (msg) {
    if (!(&apos;type&apos; in msg)) {
      throw new Error(&apos;Received message does not include \&apos;type\&apos; field&apos;)
    }

    if (this.all.has(msg.type)) {
      this.emit(msg.type, msg)
    } else {
      // &#xD578;&#xB4E4;&#xB7EC;&#xAC00; &#xC5C6;&#xB2E4;&#xBA74; unhandledMsg&#xC5D0; &#xBCF4;&#xAD00;
      if (!this.unhandledMsg.has(msg.type)) {
        this.unhandledMsg.set(msg.type, [])
      }

      const queuedMsgs = this.unhandledMsg.get(msg.type)
      queuedMsgs.push(msg)
    }
  }

  /**
   * &#xD2B9;&#xC815; `type`&#xC758; &#xBA54;&#xC2DC;&#xC9C0;&#xC5D0; &#xB300;&#xD55C; &#xD578;&#xB4E4;&#xB7EC;&#xB97C; &#xB4F1;&#xB85D;&#xD569;&#xB2C8;&#xB2E4;.
   * @param {string} type &#xBC1B;&#xC744; &#xBA54;&#xC2DC;&#xC9C0;&#xC758; &#xD0C0;&#xC785;
   * @param {EventHandler&lt;object&gt;} handler &#xBA54;&#xC2DC;&#xC9C0;&#xC758; &#xD578;&#xB4E4;&#xB7EC;
   */
  on (type, handler) {
    super.on(type, handler)

    if (!this.unhandledMsg.has(type)) return

    for (const msg of this.unhandledMsg.get(type)) {
      this.emit(type, msg)
    }
    this.unhandledMsg.delete(type)
  }

  /**
   * @abstract
   * @param {*} data &#xC804;&#xC1A1;&#xD560; &#xB370;&#xC774;&#xD130;
   */
  send (data) {}

  /**
   * @abstract
   * @param {RTCEngine} engine &#xC5D4;&#xC9C4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;
   */
  start (engine) {}

  /**
   * @abstract
   * @param {RTCEngine} engine &#xC5D4;&#xC9C4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;
   */
  connected (engine) {}

  /**
   * @abstract
   * @param {RTCEngine} engine &#xC5D4;&#xC9C4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;
   */
  disconnected (engine) {}

  /**
   * @abstract
   * @param {RTCEngine} engine &#xC5D4;&#xC9C4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;
   */
  failed (engine) {}

  /**
   * @abstract
   * @param {RTCEngine} engine &#xC5D4;&#xC9C4; &#xC778;&#xC2A4;&#xD134;&#xC2A4;
   */
  close (engine) {}
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
